datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id         String   @id
  email      String?  @unique
  tgUserId   String?
  discordId  String?
  createdAt  DateTime @default(now())
}

model Event {
  id             String   @id @default(cuid())
  whopEventId    String   @unique
  type           String
  userId         String?
  subscriptionId String?
  email          String?
  status         String?
  occurredAt     DateTime
  recovered      Boolean  @default(false)
  reason         String?
  meta           Json?
  createdAt      DateTime @default(now())
}

model Notification {
  id             String   @id @default(cuid())
  userId         String?
  subscriptionId String?
  channel        String
  messageId      String?
  status         String
  error          String?
  createdAt      DateTime @default(now())
}

model Click {
  id         String   @id @default(cuid())
  userId     String
  channel    String
  messageId  String?
  clickedAt  DateTime @default(now())
}


